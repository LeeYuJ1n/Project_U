비헤이비어 트리 (행동 트리)

- 레벨 내 객체의 행동을 조건에 따라 정해둔 것

- NPC를 위한 상태 기계라고 볼 수 있다

- 조건에 따라 하나의 상태를 찾아가면서 수행한다


YBotBehaviour > YBotBlackboard > BTT_~~ 파일 순으로 참조

YBotBehaviour : 실제 비헤이비어 트리

YBotBlackboard : 블랙보드. 비헤이비어 트리의 조건 탐색에 쓰이는 변수를 따로 모은 구조체.

BTT_~~ : 업무(태스크). 조건이 충족되었을 때, 객체가 수행할 함수를 개발자가 정의한 것.



비헤이비어 트리의 노드 구성

셀렉터(selector, 고전 총겜 조준선 아이콘) : 하위 노드 중 하나만 실행

시퀀스(sequence, 선반과 화살표 아이콘) : 하위 노드를 차례로 실행

심플 패러렐(simple parallel, 좌우 화살표) : 오른쪽 하위 노드 실행 중, 왼쪽 하위 노드 1개 동시 실행

태스크(task, 보라색) : 업무. 실제로 수행할 일

데코레이터(decorator, 군청색) : 조건문을 다른 말로 바꿔 부른 것. 블랙보드의 데이터를 참조 가능

서비스(service, 초록색) : 태스크 수행 중 같이, 혹은 뒤이어 수행할 다른 업무를 의미



실제 트리 구성은 파일을 참조

1. 루트는 "트리의 시작". 실제 AI는 루트 이후부터 실행된다

2. 위 아래 노드 중에서는 언제나 위 노드가 실행된다

3. 아래 노드가 성공이든 실패든 끝나면, 위 노드로 돌아간다

4. 같은 항렬(같은 수준의 위 노드에서 연결된 하위 수준) 노드는 무조건 왼쪽부터 실행한다

5. 셀렉터는 하나만 성공하면 성공. 왼쪽 노드가 실행되면 오른쪽은 무시된다. (생략)

6. 시퀀스는 하나만 실패해도 실패. 왼쪽 노드가 실패 후, 오른쪽을 실행할지 말지는 개발자 마음 (대부분은 실행 안 함)

하지만 오른쪽이 실행됐든 아니든, 왼쪽 노드에서 실패가 떴으면 시퀀스는 실패.